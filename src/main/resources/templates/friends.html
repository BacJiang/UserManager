<!DOCTYPE html>
<html xmlns:th="http://www.thyleleaf.org">
<head>
<title>用户管理系统</title>
<meta charset="utf-8"></meta>
<script src="https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<link
	href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css"
	rel="stylesheet"></link>
<link
	href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"
	rel="stylesheet"></link>
<script
	src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="css/style.css"></link>
</head>
<body>
	<div class="container" style="margin-top: 20px;">
		<div class="row clearfix">
			<div class="col-md-12 column">
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">好友信息</h3>
					</div>
					<div class="panel-body">
						<table class="table">
							<thead>
								<tr>
									<th>用户ID</th>
									<th>用户名</th>
									<th>性别</th>
									<th>年龄</th>
									<th>email</th>
									<th>住址</th>
									<th>操作</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="friendEntity:${friendsList}" class="info">
									<td th:text="${friendEntity.id}"></td>
									<td th:text="${friendEntity.userName}"></td>
									<td th:text="${friendEntity.sex}"></td>
									<td th:text="${friendEntity.age}"></td>
									<td th:text="${friendEntity.email}"></td>
									<td th:text="${friendEntity.address}"></td>
									<td>
										<button class="btn btn-success update-btn" data-toggle="modal"
											data-target="#update-modal">增加好友</button>
										<button class="btn btn-danger del-btn">删除</button>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="update-modal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="myModalLabel-update">更新用户信息</h4>
				</div>
				<div class="modal-body">
					<form class="form-horizontal" role="form" th:action="@{/update}"
						method="post" id="update-form">
						<div class="form-group">
							<label for="id" class="col-sm-2 control-label">用户ID</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" name="id" id="update-id"
									readonly="readonly" />
							</div>
						</div>
						<div class="form-group">
							<label for="username" class="col-sm-2 control-label">用户名</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" name="userName"
									id="update-username" />
							</div>
						</div>
						<div class="form-group">
							<label for="sex" class="col-sm-2 control-label">性别</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="update-sex"
									name="sex" />
							</div>
						</div>
						<div class="form-group">
							<label for="age" class="col-sm-2 control-label">年龄</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="update-age"
									name="age" />
							</div>
						</div>
						<div class="form-group">
							<label for="email" class="col-sm-2 control-label">email</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="update-email"
									name="email" />
							</div>
						</div>
						<div class="form-group">
							<label for="address" class="col-sm-2 control-label">地址</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="update-address"
									name="address" />
							</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
					<button type="button" class="btn btn-primary submit-update-btn">提交</button>
				</div>
			</div>
			<!-- /.modal-content -->
		</div>
		<!-- /.modal -->
	</div>
	<div class="modal fade" id="insert-modal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="myModalLabel-insert">新增用户信息</h4>
				</div>
				<div class="modal-body">
					<form class="form-horizontal" role="form" th:action="@{/insert}"
						method="post" id="insert-form">
						<div class="form-group">
							<label for="username" class="col-sm-2 control-label">用户名</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" name="userName"
									id="insert-username" />
							</div>
						</div>
						<div class="form-group">
							<label for="sex" class="col-sm-2 control-label">性别</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="insert-sex"
									name="sex" />
							</div>
						</div>
						<div class="form-group">
							<label for="age" class="col-sm-2 control-label">年龄</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="insert-age"
									name="age" />
							</div>
						</div>
						<div class="form-group">
							<label for="email" class="col-sm-2 control-label">email</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="insert-email"
									name="email" />
							</div>
						</div>
						<div class="form-group">
							<label for="address" class="col-sm-2 control-label">地址</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="insert-address"
									name="address" />
							</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
					<button type="button" class="btn btn-primary submit-insert-btn">提交</button>
				</div>
			</div>
			<!-- /.modal-content -->
		</div>
		<!-- /.modal -->
	</div>
</body>
</html>
<script src="/js/jquery.min.js"></script>
<script src="/js/bootstrap.js"></script>
<script type="application/javascript">
	
	
$(".submit-insert-btn").click(function () {
    $("#insert-form").submit();
});	

$(".update-btn").click(function(){
	var tds = $(this).parent().parent().children()
	$("#update-id").val(tds[0].innerText);
	$("#update-username").val(tds[1].innerText);
	$("#update-sex").val(tds[2].innerText);
	$("#update-age").val(tds[3].innerText);
	$("#update-email").val(tds[4].innerText);
	$("#update-address").val(tds[5].innerText);
});
$(".submit-update-btn").click(function () {
    $("#update-form").submit();
});

$(".del-btn").click(function(){
	window.open("/delete?id=" + $(this).parent().parent().children()[0].innerText, "_self");
});

$(".query-btn").click(function(){
	window.open("/queryFriends?id=" + $(this).parent().parent().children()[0].innerText, "_self");
});


</script>